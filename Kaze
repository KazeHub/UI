--// Kaze UI Base
--// Window System (PC + Mobile)

local KazeUI = {}
KazeUI.__index = KazeUI

--// Services
local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local UIS = game:GetService("UserInputService")
local LP = Players.LocalPlayer

--// Create ScreenGui
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "KazeUI"
ScreenGui.ResetOnSpawn = false
ScreenGui.Parent = LP:WaitForChild("PlayerGui")

--// Auto Scale (PC + Mobile)
local UIScale = Instance.new("UIScale")
UIScale.Parent = ScreenGui

local function UpdateScale()
	local size = workspace.CurrentCamera.ViewportSize
	UIScale.Scale = math.clamp(size.X / 1920, 0.6, 1)
end

UpdateScale()
workspace.CurrentCamera:GetPropertyChangedSignal("ViewportSize"):Connect(UpdateScale)

--// CREATE WINDOW
function KazeUI:CreateWindow(config)
	config = config or {}

	local Title   = config.Title or "UI"
	local Author  = config.Author or "Unknown"
	local Version = config.Version or "1.0"
	local Callback = config.Callback

	--// Main Window
	local Window = Instance.new("Frame")
	Window.Size = UDim2.fromOffset(650, 420)
	Window.Position = UDim2.fromScale(0.5, 0.5)
	Window.AnchorPoint = Vector2.new(0.5, 0.5)
	Window.BackgroundColor3 = Color3.fromRGB(20, 20, 25)
	Window.BorderSizePixel = 0
	Window.Parent = ScreenGui
	Instance.new("UICorner", Window).CornerRadius = UDim.new(0, 14)

	local Stroke = Instance.new("UIStroke")
	Stroke.Color = Color3.fromRGB(0, 200, 255)
	Stroke.Thickness = 1.5
	Stroke.Parent = Window

	--// TOP BAR
	local TopBar = Instance.new("Frame")
	TopBar.Size = UDim2.new(1, 0, 0, 48)
	TopBar.BackgroundColor3 = Color3.fromRGB(15, 15, 20)
	TopBar.BorderSizePixel = 0
	TopBar.Parent = Window
	Instance.new("UICorner", TopBar).CornerRadius = UDim.new(0, 14)

	--// Title
	local TitleLabel = Instance.new("TextLabel")
	TitleLabel.Size = UDim2.new(1, -140, 1, 0)
	TitleLabel.Position = UDim2.fromOffset(16, 0)
	TitleLabel.BackgroundTransparency = 1
	TitleLabel.Text = Title .. " | " .. Author .. " v" .. Version
	TitleLabel.TextColor3 = Color3.fromRGB(220, 220, 220)
	TitleLabel.Font = Enum.Font.GothamBold
	TitleLabel.TextSize = 16
	TitleLabel.TextXAlignment = Enum.TextXAlignment.Left
	TitleLabel.TextYAlignment = Enum.TextYAlignment.Center
	TitleLabel.Parent = TopBar

	--// Buttons
	local Buttons = Instance.new("Frame")
	Buttons.Size = UDim2.fromOffset(80, 36)
	Buttons.Position = UDim2.new(1, -88, 0.5, -18)
	Buttons.BackgroundTransparency = 1
	Buttons.Parent = TopBar

	local layout = Instance.new("UIListLayout", Buttons)
	layout.FillDirection = Enum.FillDirection.Horizontal
	layout.HorizontalAlignment = Enum.HorizontalAlignment.Right
	layout.Padding = UDim.new(0, 8)

	local Minimize = Instance.new("TextButton")
	Minimize.Size = UDim2.fromOffset(36, 36)
	Minimize.Text = "–"
	Minimize.Font = Enum.Font.GothamBold
	Minimize.TextSize = 22
	Minimize.TextColor3 = Color3.fromRGB(200, 200, 200)
	Minimize.BackgroundColor3 = Color3.fromRGB(25, 25, 30)
	Minimize.Parent = Buttons
	Instance.new("UICorner", Minimize).CornerRadius = UDim.new(1, 0)

	local Close = Instance.new("TextButton")
	Close.Size = UDim2.fromOffset(36, 36)
	Close.Text = "✕"
	Close.Font = Enum.Font.GothamBold
	Close.TextSize = 18
	Close.TextColor3 = Color3.fromRGB(255, 90, 90)
	Close.BackgroundColor3 = Color3.fromRGB(25, 25, 30)
	Close.Parent = Buttons
	Instance.new("UICorner", Close).CornerRadius = UDim.new(1, 0)

	--// Content
	local Content = Instance.new("Frame")
	Content.Position = UDim2.fromOffset(0, 50)
	Content.Size = UDim2.new(1, 0, 1, -50)
	Content.BackgroundTransparency = 1
	Content.Parent = Window

	--// Minimize Logic
	local minimized = false
	Minimize.MouseButton1Click:Connect(function()
		minimized = not minimized
		Content.Visible = not minimized
		Window.Size = minimized and UDim2.fromOffset(650, 48) or UDim2.fromOffset(650, 420)
	end)

	--// Close Logic
	Close.MouseButton1Click:Connect(function()
		ScreenGui:Destroy()
	end)

	if typeof(Callback) == "function" then
		pcall(Callback)
	end

	return {
		Window = Window,
		Content = Content
	}
end

return KazeUI
