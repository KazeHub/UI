-- Kaze.lua
local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")

local KazeUI = {}
KazeUI.__index = KazeUI

-- create the window
function KazeUI:CreateWindow(config)
    config = config or {}
    local Title = config.Title or "UI Window"
    local Author = config.Author or ""
    local Version = config.Version or ""
    local ThemeColor = config.ThemeColor or Color3.fromRGB(0, 255, 255)

    local PlayerGui = Players.LocalPlayer:WaitForChild("PlayerGui")
    local ScreenGui = Instance.new("ScreenGui")
    ScreenGui.Name = "KazeUI"
    ScreenGui.ResetOnSpawn = false
    ScreenGui.Parent = PlayerGui

    local Main = Instance.new("Frame")
    Main.Size = UDim2.fromOffset(650, 420)
    Main.Position = UDim2.new(0.5, 0, 0.5, 0)
    Main.AnchorPoint = Vector2.new(0.5, 0.5)
    Main.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
    Main.Parent = ScreenGui

    Instance.new("UICorner", Main).CornerRadius = UDim.new(0, 12)

    local TopBar = Instance.new("Frame")
    TopBar.Size = UDim2.new(1, 0, 0, 48)
    TopBar.BackgroundColor3 = Color3.fromRGB(18, 18, 22)
    TopBar.Parent = Main

    local TitleLabel = Instance.new("TextLabel")
    TitleLabel.Size = UDim2.new(1, -140, 1, 0)
    TitleLabel.Position = UDim2.fromOffset(16, 0)
    TitleLabel.BackgroundTransparency = 1
    TitleLabel.Text = Title .. " | " .. Author .. " v" .. Version
    TitleLabel.TextColor3 = Color3.fromRGB(230, 230, 230)
    TitleLabel.Font = Enum.Font.GothamBold
    TitleLabel.TextSize = 16
    TitleLabel.TextXAlignment = Enum.TextXAlignment.Left
    TitleLabel.Parent = TopBar

    local CloseBtn = Instance.new("TextButton")
    CloseBtn.Size = UDim2.fromOffset(36, 36)
    CloseBtn.Position = UDim2.new(1, -44, 0.5, -18)
    CloseBtn.Text = "✕"
    CloseBtn.Font = Enum.Font.GothamBold
    CloseBtn.TextColor3 = ThemeColor
    CloseBtn.BackgroundTransparency = 1
    CloseBtn.Parent = TopBar

    local MinBtn = Instance.new("TextButton")
    MinBtn.Size = UDim2.fromOffset(36, 36)
    MinBtn.Position = UDim2.new(1, -88, 0.5, -18)
    MinBtn.Text = "–"
    MinBtn.Font = Enum.Font.GothamBold
    MinBtn.TextColor3 = ThemeColor
    MinBtn.BackgroundTransparency = 1
    MinBtn.Parent = TopBar

    local Content = Instance.new("Frame")
    Content.Position = UDim2.fromOffset(0, 50)
    Content.Size = UDim2.new(1, 0, 1, -50)
    Content.BackgroundTransparency = 1
    Content.Parent = Main

    -- minimize / restore
    local minimized = false
    MinBtn.MouseButton1Click:Connect(function()
        minimized = not minimized
        Content.Visible = not minimized
        Main.Size = minimized and UDim2.fromOffset(650, 48) or UDim2.fromOffset(650, 420)
    end)

    CloseBtn.MouseButton1Click:Connect(function()
        ScreenGui:Destroy()
    end)

    -- drag
    local dragging, dragStart, startPos
    TopBar.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
            dragging = true
            dragStart = input.Position
            startPos = Main.Position
        end
    end)
    UserInputService.InputChanged:Connect(function(input)
        if dragging and (input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch) then
            local delta = input.Position - dragStart
            Main.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
        end
    end)
    UserInputService.InputEnded:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
            dragging = false
        end
    end)

    return {
        ScreenGui = ScreenGui,
        Main = Main,
        Content = Content
    }
end

return KazeUI
